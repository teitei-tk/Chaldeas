'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.defaultConfig=void 0;var _regenerator=require('babel-runtime/regenerator'),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator'),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_classCallCheck2=require('babel-runtime/helpers/classCallCheck'),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require('babel-runtime/helpers/createClass'),_createClass3=_interopRequireDefault(_createClass2);exports.mergeConfig=mergeConfig;var _chromeLauncher=require('lighthouse/lighthouse-cli/chrome-launcher');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var defaultConfig=exports.defaultConfig={port:9222,autoSelectChrome:!0,additionalFlags:['--window-size=412,732','--disable-gpu','--headless']};function mergeConfig(a){return Object.assign({},defaultConfig,a)}var Launcher=function(){function a(b){(0,_classCallCheck3.default)(this,a),this.config=mergeConfig(b),this.chromeLauncher=new _chromeLauncher.ChromeLauncher(this.config)}return(0,_createClass3.default)(a,[{key:'isLaunched',value:function(){return!!this.chromeLauncher.chrome}},{key:'reboot',value:function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(){var b,c;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.isLaunched()){a.next=5;break}return a.next=3,this.start();case 3:return b=a.sent,a.abrupt('return',b);case 5:return a.next=7,this.terminate();case 7:return a.next=9,this.start();case 9:return c=a.sent,a.abrupt('return',c);case 11:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:'terminate',value:function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(){return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt('return',this.chromeLauncher.kill());case 1:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:'start',value:function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(){var b=this;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt('return',this.chromeLauncher.run().catch(function(a){return b.terminate().then(function(){throw a})}));case 1:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()}]),a}();exports.default=Launcher;