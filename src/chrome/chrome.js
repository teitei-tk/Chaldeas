'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.defaultOption=void 0;var _regenerator=require('babel-runtime/regenerator'),_regenerator2=_interopRequireDefault(_regenerator),_slicedToArray2=require('babel-runtime/helpers/slicedToArray'),_slicedToArray3=_interopRequireDefault(_slicedToArray2),_asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator'),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_classCallCheck2=require('babel-runtime/helpers/classCallCheck'),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require('babel-runtime/helpers/createClass'),_createClass3=_interopRequireDefault(_createClass2);exports.mergeDefaultOption=mergeDefaultOption;var _chromeRemoteInterface=require('chrome-remote-interface'),_chromeRemoteInterface2=_interopRequireDefault(_chromeRemoteInterface),_defaults=require('chrome-remote-interface/lib/defaults'),_defaults2=_interopRequireDefault(_defaults);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var defaultOption=exports.defaultOption={host:_defaults2.default.HOST,port:_defaults2.default.PORT,secure:!0};function mergeDefaultOption(a){return Object.assign({},defaultOption,a)}var Chrome=function(){function a(b){(0,_classCallCheck3.default)(this,a),this.option=mergeDefaultOption(b)}return(0,_createClass3.default)(a,[{key:'connectDevToolsProtocolClient',value:function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(){var b,c,d;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.client){a.next=9;break}return a.next=3,_chromeRemoteInterface2.default.List();case 3:return b=a.sent,c=(0,_slicedToArray3.default)(b,1),d=c[0],a.next=8,(0,_chromeRemoteInterface2.default)({host:this.option.host,target:d});case 8:this.client=a.sent;case 9:return a.abrupt('return',this);case 10:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:'fetchProtocol',value:function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(){var b=this;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.connectDevToolsProtocolClient().catch(function(a){return b.terminate().then(function(){throw a})});case 2:return a.abrupt('return',this.client);case 3:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:'terminate',value:function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(){return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.client){a.next=4;break}return a.next=3,this.client.close();case 3:delete this.client;case 4:return a.abrupt('return',this);case 5:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()}]),a}();exports.default=Chrome;