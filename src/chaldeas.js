'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _regenerator=require('babel-runtime/regenerator'),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator'),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_classCallCheck2=require('babel-runtime/helpers/classCallCheck'),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require('babel-runtime/helpers/createClass'),_createClass3=_interopRequireDefault(_createClass2),_chrome=require('./chrome/chrome'),_chrome2=_interopRequireDefault(_chrome),_launcher=require('./chrome/launcher'),_launcher2=_interopRequireDefault(_launcher);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var Chaldeas=function(){function a(b,c){(0,_classCallCheck3.default)(this,a),this.chrome=b,this.launcher=c}return(0,_createClass3.default)(a,[{key:'dispatch',value:function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(){return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.launcher.isLaunched()){a.next=3;break}return a.next=3,this.launcher.start();case 3:return a.next=5,this.chrome.connectDevToolsProtocolClient();case 5:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:'fetchProtocol',value:function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(){var b,c=this;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.dispatch().then((0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(){var b;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.chrome.fetchProtocol();case 2:return b=a.sent,a.abrupt('return',b);case 4:case'end':return a.stop();}},a,c)}))).catch(function(a){return c.terminate().then(function(){throw a})});case 2:return b=a.sent,a.abrupt('return',b);case 4:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:'terminate',value:function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(){return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.chrome.terminate();case 2:return a.next=4,this.launcher.terminate();case 4:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}()}],[{key:'new',value:function(b,c){var d=new _chrome2.default(b),e=new _launcher2.default(c);return new a(d,e)}}]),a}();exports.default=Chaldeas;